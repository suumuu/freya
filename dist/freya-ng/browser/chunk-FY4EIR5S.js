import{a as _e,b as fe}from"./chunk-TQCPWIGC.js";import{a as O}from"./chunk-4RPAHO2B.js";import{a as de,b as ue}from"./chunk-6SH65H3O.js";import{a as me,b as ce}from"./chunk-LVJTYWEP.js";import{a as re,h as ae,i as se,k as pe}from"./chunk-GPR2OA7G.js";import{a as oe,b as le}from"./chunk-HGA4HHWU.js";import{a as H,b as W,c as j,d as L}from"./chunk-WYYYCDFM.js";import{a as E,b as R}from"./chunk-DRW73UVK.js";import{b as ee,d as te,g as ie,k as ne}from"./chunk-PIH2IZGE.js";import{d as Z}from"./chunk-76Z42HQQ.js";import{a as A,b as N}from"./chunk-PADEYSER.js";import{b as D,d as F}from"./chunk-MRXEPQQC.js";import{i as B,j as P}from"./chunk-WPF24WGD.js";import{ra as I}from"./chunk-U7ZBBLWD.js";import{i as Y,k as V,t as k}from"./chunk-WLQFZU5C.js";import{$ as p,$b as S,Fb as g,Ia as Q,Jb as _,Lb as s,Na as d,Ta as b,Ub as M,Xb as X,Za as T,Zb as v,aa as m,bc as h,cc as x,db as y,dc as w,fb as U,gc as C,ic as K,uc as $,vb as u,wb as l,xb as c,yb as f}from"./chunk-TDJGN2RG.js";import{a as q,b as J}from"./chunk-GAL4ENT6.js";var ke=()=>({height:"250px"});function Ie(r,n){if(r&1&&f(0,"div",20),r&2){let e=s(2);u("innerHTML",e.content.message,Q)}}function Ee(r,n){if(r&1){let e=g();l(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),v(4,"To"),c(),l(5,"p-iconfield",5),f(6,"p-inputicon",6),l(7,"input",7),w("ngModelChange",function(t){p(e);let o=s();return x(o.content.from,t)||(o.content.from=t),m(t)}),c()()(),l(8,"div",3)(9,"label",8),v(10,"Subject"),c(),l(11,"p-iconfield",5),f(12,"p-inputicon",9),l(13,"input",10),w("ngModelChange",function(t){p(e);let o=s();return x(o.content.title,t)||(o.content.title=t),m(t)}),c()()(),y(14,Ie,1,1,"div",11),l(15,"div",12)(16,"span",13),_("click",function(){p(e);let t=s();return m(t.toggleMessage())}),f(17,"i",14),c(),l(18,"p-editor",15),w("ngModelChange",function(t){p(e);let o=s();return x(o.newMail.message,t)||(o.newMail.message=t),m(t)}),c()()(),l(19,"div",16),f(20,"button",17)(21,"button",18),l(22,"button",19),_("click",function(){p(e);let t=s();return m(t.sendMail())}),c()()()}if(r&2){let e=s();d(7),h("ngModel",e.content.from),d(6),h("ngModel",e.content.title),d(),u("ngIf",e.displayMessage),d(2),u("pTooltip",e.displayMessage?"Hide content":"Show content"),d(2),X(C(7,ke)),h("ngModel",e.newMail.message)}}var G=class r{constructor(n,e){this.messageService=n;this.mailService=e}newMail={id:"",to:"",email:"",image:"",title:"",message:"",date:"",important:!1,starred:!1,trash:!1,spam:!1,archived:!1,sent:!0};displayMessage=!1;content={};hide=new U;sendMail(){let{image:n,from:e,title:i}=this.content;this.newMail=J(q({},this.newMail),{to:e,title:i,image:n}),this.mailService.onSend(this.newMail),this.messageService.add({severity:"success",summary:"Success",detail:"Mail sent"}),this.hide.emit()}toggleMessage(){this.displayMessage=!this.displayMessage}static \u0275fac=function(e){return new(e||r)(b(I),b(O))};static \u0275cmp=T({type:r,selectors:[["app-mail-reply"]],inputs:{content:"content"},outputs:{hide:"hide"},decls:1,vars:1,consts:[["class","p-0 m-0",4,"ngIf"],[1,"p-0","m-0"],[1,"bg-surface-0","dark:bg-surface-950","grid","grid-cols-12","grid-nogutter","flex-col","md:flex-row","gap-12","p-8","rounded"],[1,"col-span-6"],["for","to",1,"block","text-surface-900","dark:text-surface-0","font-semibold","mb-4"],["styleClass","w-full",2,"height","3.5rem"],["styleClass","pi pi-user",2,"left","1.5rem"],["id","to","type","text","pInputText","",1,"w-full","!pl-16","text-surface-900","dark:text-surface-0","font-semibold",2,"height","3.5rem",3,"ngModelChange","ngModel"],["for","Subject",1,"block","text-surface-900","dark:text-surface-0","font-semibold","mb-4"],["styleClass","pi pi-pencil",2,"left","1.5rem"],["id","subject","type","text","pInputText","","placeholder","Subject",1,"w-full","!pl-16","text-surface-900","dark:text-surface-0","font-semibold",2,"height","3.5rem",3,"ngModelChange","ngModel"],["class","col-span-12",3,"innerHTML",4,"ngIf"],[1,"col-span-12"],[1,"bg-surface-50","dark:bg-surface-950","cursor-pointer","rounded","px-2",3,"click","pTooltip"],[1,"pi","pi-ellipsis-h"],["styleClass","mt-4",3,"ngModelChange","ngModel"],[1,"flex","gap-x-4","justify-end","p-8","border-t","border-surface-200","dark:border-surface-700"],["pButton","","pRipple","","type","button","outlined","","icon","pi pi-image"],["pButton","","pRipple","","type","button","outlined","","icon","pi pi-paperclip"],["pButton","","pRipple","","type","button","icon","pi pi-send","label","Send",1,"h-12",3,"click"],[1,"col-span-12",3,"innerHTML"]],template:function(e,i){e&1&&y(0,Ee,23,8,"div",0),e&2&&u("ngIf",i.content)},dependencies:[k,V,N,A,F,D,fe,_e,ne,ee,te,ie,W,H,L,j,R,E,P,B],encapsulation:2})};var Re=()=>["from","title","message"],Be=()=>[10,20,30],Pe=(r,n)=>({"pi-star-fill":r,"pi-star":n}),De=(r,n)=>({"pi-bookmark-fill":r,"pi-bookmark":n});function Fe(r,n){if(r&1){let e=g();l(0,"div",9)(1,"div",10),f(2,"p-tableHeaderCheckbox")(3,"button",11),l(4,"button",12),_("click",function(t){p(e);let o=M(6);return m(o.toggle(t))}),c(),f(5,"p-menu",13,3),c(),l(7,"p-iconfield"),f(8,"p-inputicon",14),l(9,"input",15),_("input",function(t){p(e);let o=s(),a=M(1);return m(o.onGlobalFilter(a,t))}),c()()()}if(r&2){let e=s(),i=M(1);d(5),u("model",e.menuItems)("appendTo",i)("popup",!0)}}function He(r,n){if(r&1){let e=g();l(0,"td",32)(1,"span",33),_("click",function(t){p(e);let o=s().$implicit,a=s();return m(a.onStar(t,o.id))})("touchend",function(t){p(e);let o=s().$implicit,a=s();return m(a.onStar(t,o.id))}),f(2,"i",34),c()()}if(r&2){let e=s().$implicit;d(2),u("ngClass",K(1,Pe,e.starred,!e.starred))}}function We(r,n){if(r&1){let e=g();l(0,"td",32)(1,"span",33),_("click",function(t){p(e);let o=s().$implicit,a=s();return m(a.onBookmark(t,o.id))})("touchend",function(t){p(e);let o=s().$implicit,a=s();return m(a.onBookmark(t,o.id))}),f(2,"i",34),c()()}if(r&2){let e=s().$implicit;d(2),u("ngClass",K(1,De,e.important,!e.important))}}function je(r,n){if(r&1){let e=g();l(0,"tr",16),_("mouseenter",function(t){p(e);let o=M(15),a=M(18),z=s();return m(z.toggleOptions(t,a,o))})("mouseleave",function(t){p(e);let o=M(15),a=M(18),z=s();return m(z.toggleOptions(t,a,o))})("click",function(){let t=p(e).$implicit,o=s();return m(o.onRowSelect(t.id))}),l(1,"td",17)(2,"p-tableCheckbox",18),_("click",function(t){return p(e),m(t.stopPropagation())})("touchend",function(t){return p(e),m(t.stopPropagation())}),c()(),y(3,He,3,4,"td",19)(4,We,3,4,"td",19),l(5,"td",20),f(6,"p-avatar",21),c(),l(7,"td",22),v(8),c(),l(9,"td",23)(10,"span",24),v(11),c()(),l(12,"td",25)(13,"div",26)(14,"span",27,4),v(16),c(),l(17,"div",28,5)(19,"button",29),_("click",function(t){let o=p(e).$implicit,a=s();return m(a.onArchive(t,o.id))}),c(),l(20,"button",30),_("click",function(t){let o=p(e).$implicit,a=s();return m(a.onReply(t,o))}),c(),l(21,"button",31),_("click",function(t){let o=p(e).$implicit,a=s();return m(a.onTrash(t,o))}),c()()()()()}if(r&2){let e=n.$implicit;d(2),u("value",e),d(),u("ngIf",!e.trash&&!e.spam),d(),u("ngIf",!e.trash&&!e.spam),d(2),u("image",e.image?"/demo/images/avatar/"+e.image:"assets/layout/images/avatar.png"),d(2),S(" ",e.from||e.to," "),d(3),S(" ",e.title," "),d(5),S(" ",e.date," ")}}var ge=class r{constructor(n,e,i){this.router=n;this.mailService=e;this.messageService=i}mails;menuItems=[];selectedMails=[];mail={};dialogVisible=!1;ngOnInit(){this.menuItems=[{label:"Archive",icon:"pi pi-fw pi-file",command:()=>this.onArchiveMultiple()},{label:"Spam",icon:"pi pi-fw pi-ban",command:()=>this.onSpamMultiple()},{label:"Delete",icon:"pi pi-fw pi-trash",command:()=>this.onDeleteMultiple()}]}toggleOptions(n,e,i){n.type==="mouseenter"?(e.style.display="flex",i.style.display="none"):(e.style.display="none",i.style.display="flex")}onRowSelect(n){this.router.navigate(["/apps/mail/detail/",n])}onStar(n,e){n.stopPropagation(),this.mailService.onStar(e)}onArchive(n,e){n.stopPropagation(),this.mailService.onArchive(e),this.messageService.add({severity:"info",summary:"Info",detail:"Mail archived",life:3e3})}onBookmark(n,e){n.stopPropagation(),this.mailService.onBookmark(e)}onDelete(n){this.mailService.onDelete(n),this.messageService.add({severity:"info",summary:"Info",detail:"Mail deleted",life:3e3})}onDeleteMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onDeleteMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Mails deleted",life:3e3}))}onSpamMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onSpamMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Moved to spam",life:3e3}))}onArchiveMultiple(){this.selectedMails&&this.selectedMails.length>0&&(this.mailService.onArchiveMultiple(this.selectedMails),this.messageService.add({severity:"info",summary:"Info",detail:"Moved to archive",life:3e3}))}onTrash(n,e){n.stopPropagation(),e.trash&&this.onDelete(e.id),this.mailService.onTrash(e.id)}onReply(n,e){n.stopPropagation(),this.mail=e,this.dialogVisible=!0}onGlobalFilter(n,e){n.filterGlobal(e.target.value,"contains")}static \u0275fac=function(e){return new(e||r)(b(Z),b(O),b(I))};static \u0275cmp=T({type:r,selectors:[["app-mail-table"]],inputs:{mails:"mails"},decls:8,vars:13,consts:[["dt",""],["caption",""],["body",""],["menu",""],["date",""],["options",""],["responsiveLayout","scroll","selectionMode","multiple","dataKey","id",3,"selectionChange","value","rows","globalFilterFields","paginator","rowsPerPageOptions","selection","rowHover"],["header","New Message","styleClass","mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12","contentStyleClass","rounded-b border-t border-surface-200 dark:border-surface-700 p-0",3,"visibleChange","onHide","visible","closable","modal"],[3,"hide","content"],[1,"flex","flex-wrap","items-center","justify-between","gap-3"],[1,"flex","gap-2","items-center"],["pButton","","pRipple","","type","button","icon","pi pi-refresh","rounded","","text","","plain","",1,"ml-4"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","rounded","","text","","plain","",1,"ml-3",3,"click"],[3,"model","appendTo","popup"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Mail",1,"w-full","sm:w-auto",3,"input"],[1,"cursor-pointer",3,"mouseenter","mouseleave","click"],[1,"pl-3",2,"width","4rem"],[3,"click","touchend","value"],["style","width: 4rem",4,"ngIf"],[2,"min-width","4rem"],[3,"image"],[1,"text-900","font-semibold",2,"min-width","12rem"],[2,"min-width","12rem"],[1,"font-medium","white-space-nowrap","overflow-hidden","text-overflow-ellipsis","block",2,"max-width","30rem"],[2,"width","12rem"],[1,"flex","justify-content-end","w-full","px-0"],[1,"text-700","font-semibold","white-space-nowrap"],[2,"display","none"],["pButton","","pRipple","","icon","pi pi-inbox","pTooltip","Archive","tooltipPosition","top","type","button",1,"h-8","w-8","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-reply","severity","secondary","pTooltip","Reply","tooltipPosition","top","type","button",1,"h-8","w-8","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","severity","danger","pTooltip","Trash","tooltipPosition","top","type","button",1,"h-8","w-8rem",3,"click"],[2,"width","4rem"],[1,"cursor-pointer",3,"click","touchend"],[1,"pi","pi-fw","text-xl",3,"ngClass"]],template:function(e,i){if(e&1){let t=g();l(0,"p-table",6,0),w("selectionChange",function(a){return p(t),x(i.selectedMails,a)||(i.selectedMails=a),m(a)}),y(2,Fe,10,3,"ng-template",null,1,$)(4,je,22,7,"ng-template",null,2,$),c(),l(6,"p-dialog",7),w("visibleChange",function(a){return p(t),x(i.dialogVisible,a)||(i.dialogVisible=a),m(a)}),_("onHide",function(){return p(t),m(i.dialogVisible=!1)}),l(7,"app-mail-reply",8),_("hide",function(){return p(t),m(i.dialogVisible=!1)}),c()()}e&2&&(u("value",i.mails)("rows",10)("globalFilterFields",C(11,Re))("paginator",!0)("rowsPerPageOptions",C(12,Be)),h("selection",i.selectedMails),u("rowHover",!0),d(6),h("visible",i.dialogVisible),u("closable",!0)("modal",!0),d(),u("content",i.mail))},dependencies:[pe,re,ae,se,F,D,k,Y,V,ce,me,P,B,ue,de,le,oe,G,W,H,L,j,R,E,N,A],encapsulation:2})};export{ge as a};
