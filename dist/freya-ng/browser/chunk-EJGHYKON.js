import{b as L,c as s,e as n,p as z,q as h}from"./chunk-U7ZBBLWD.js";import{$a as m,Jb as f,Lc as a,S as c,Sa as g,Ta as l,_a as C,gb as v,pa as u}from"./chunk-TDJGN2RG.js";var D=(()=>{class i{el;renderer;zone;constructor(e,t,r){this.el=e,this.renderer=t,this.zone=r}selector;enterFromClass;enterActiveClass;enterToClass;leaveFromClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;hideOnResize;resizeSelector;eventListener;documentClickListener;documentKeydownListener;windowResizeListener;resizeObserver;target;enterListener;leaveListener;animating;_enterClass;_leaveClass;_resizeTarget;clickListener(){this.target||=h(this.selector,this.el.nativeElement),this.toggleClass?this.toggle():this.target?.offsetParent===null?this.enter():this.leave()}toggle(){L(this.target,this.toggleClass)?n(this.target,this.toggleClass):s(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,this.enterActiveClass.includes("slidedown")&&(this.target.style.height="0px",n(this.target,this.enterFromClass||"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",s(this.target,this.enterFromClass||"hidden"),this.target.style.height=""),s(this.target,this.enterActiveClass),this.enterFromClass&&n(this.target,this.enterFromClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{n(this.target,this.enterActiveClass),this.enterToClass&&s(this.target,this.enterToClass),this.enterListener&&this.enterListener(),this.enterActiveClass?.includes("slidedown")&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterFromClass&&n(this.target,this.enterFromClass),this.enterToClass&&s(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener(),this.hideOnResize&&this.bindResizeListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,s(this.target,this.leaveActiveClass),this.leaveFromClass&&n(this.target,this.leaveFromClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{n(this.target,this.leaveActiveClass),this.leaveToClass&&s(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveFromClass&&n(this.target,this.leaveFromClass),this.leaveToClass&&s(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener(),this.hideOnResize&&this.unbindResizeListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",e=>{!this.isVisible()||getComputedStyle(this.target).getPropertyValue("position")==="static"?this.unbindDocumentClickListener():this.isOutsideClick(e)&&this.leave()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",e=>{let{key:t,keyCode:r,which:o,type:d}=e;(!this.isVisible()||getComputedStyle(this.target).getPropertyValue("position")==="static")&&this.unbindDocumentKeydownListener(),this.isVisible()&&t==="Escape"&&r===27&&o===27&&this.leave()})})}isVisible(){return this.target.offsetParent!==null}isOutsideClick(e){return!this.el.nativeElement.isSameNode(e.target)&&!this.el.nativeElement.contains(e.target)&&!this.target.contains(e.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}bindResizeListener(){this._resizeTarget=h(this.resizeSelector),z(this._resizeTarget)?this.bindElementResizeListener():this.bindWindowResizeListener()}unbindResizeListener(){this.unbindWindowResizeListener(),this.unbindElementResizeListener()}bindWindowResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.renderer.listen(window,"resize",()=>{this.isVisible()?this.leave():this.unbindWindowResizeListener()})})}unbindWindowResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}bindElementResizeListener(){if(!this.resizeObserver&&this._resizeTarget){let e=!0;this.resizeObserver=new ResizeObserver(()=>{if(e){e=!1;return}this.isVisible()&&this.leave()}),this.resizeObserver.observe(this._resizeTarget)}}unbindElementResizeListener(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}ngOnDestroy(){this.target=null,this._resizeTarget=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener(),this.unbindResizeListener()}static \u0275fac=function(t){return new(t||i)(l(u),l(g),l(v))};static \u0275dir=m({type:i,selectors:[["","pStyleClass",""]],hostBindings:function(t,r){t&1&&f("click",function(d){return r.clickListener(d)})},inputs:{selector:[0,"pStyleClass","selector"],enterFromClass:"enterFromClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveFromClass:"leaveFromClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:[2,"hideOnOutsideClick","hideOnOutsideClick",a],toggleClass:"toggleClass",hideOnEscape:[2,"hideOnEscape","hideOnEscape",a],hideOnResize:[2,"hideOnResize","hideOnResize",a],resizeSelector:"resizeSelector"}})}return i})(),T=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=C({type:i});static \u0275inj=c({})}return i})();export{D as a,T as b};
