import{b as o}from"./chunk-5YHCM6BB.js";import{R as m,V as n,g as h}from"./chunk-TDJGN2RG.js";import{a as e,b as l}from"./chunk-GAL4ENT6.js";var d=class r{constructor(t){this.http=t;this.http.get("/demo/data/mail.json").toPromise().then(i=>i.data).then(i=>{this.updateMails(i)})}_mails=[];mails=new h(this._mails);mails$=this.mails.asObservable();updateMails(t){this._mails=t,this.mails.next(t)}onStar(t){this._mails=this._mails.map(i=>i.id===t?l(e({},i),{starred:!i.starred}):i),this.mails.next(this._mails)}onArchive(t){this._mails=this._mails.map(i=>i.id===t?l(e({},i),{archived:!i.archived}):i),this.mails.next(this._mails)}onBookmark(t){this._mails=this._mails.map(i=>i.id===t?l(e({},i),{important:!i.important}):i),this.mails.next(this._mails)}onDelete(t){this._mails=this._mails.filter(i=>i.id!==t),this.mails.next(this._mails)}onDeleteMultiple(t){let i=t.map(a=>Number(a.id));this._mails=this._mails.filter(a=>i.indexOf(a.id)==-1),this.mails.next(this._mails)}onArchiveMultiple(t){let i=t.map(a=>a.id);for(let a=0;a<this._mails.length;a++){let s=this._mails[a];i.indexOf(s.id)!==-1&&(s.archived=!0,this._mails[a]=s)}this.mails.next(this._mails)}onSpamMultiple(t){let i=t.map(a=>a.id);for(let a=0;a<this._mails.length;a++){let s=this._mails[a];i.indexOf(s.id)!==-1&&(s=l(e({},s),{spam:!0,important:!1,starred:!1,archived:!1}),this._mails[a]=s)}this.mails.next(this._mails)}onTrash(t){this._mails=this._mails.map(i=>i.id===t?l(e({},i),{trash:!0}):i),this.mails.next(this._mails)}onSend(t){t.id||(t.id=this.generateId()),t.title||(t.title="Untitled"),t.date=this.generateDate(),this._mails.push(t),this.mails.next(this._mails)}generateId(){let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<5;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}generateDate(){return new Date().toDateString().split(" ").slice(1,4).join(" ")}static \u0275fac=function(i){return new(i||r)(n(o))};static \u0275prov=m({token:r,factory:r.\u0275fac})};export{d as a};
