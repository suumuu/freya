import{a as ne,b as oe}from"./chunk-DROEAGL7.js";import{a as te,b as ie,c as re,d as ae}from"./chunk-WYYYCDFM.js";import{a as N,b as O}from"./chunk-DRW73UVK.js";import{b as B,d as F,g as V,k as j}from"./chunk-PIH2IZGE.js";import{b as Y}from"./chunk-5YHCM6BB.js";import"./chunk-BODZH67C.js";import"./chunk-7UZYWCAJ.js";import{b as Z,d as ee}from"./chunk-MRXEPQQC.js";import"./chunk-YSV4FEGF.js";import"./chunk-WPF24WGD.js";import"./chunk-4O3FVBGX.js";import"./chunk-5IEWOUYS.js";import"./chunk-U7ZBBLWD.js";import{i as U,j as D,k as X,t as w}from"./chunk-WLQFZU5C.js";import{$ as _,$b as $,Fb as H,Ja as y,Jb as u,Lb as v,Na as o,R as J,Ta as h,Ub as I,V as G,Za as g,Zb as c,_b as f,aa as C,bc as k,cc as M,db as x,dc as E,ec as S,fc as K,g as q,jc as T,uc as Q,vb as s,wb as a,xb as n,yb as l}from"./chunk-TDJGN2RG.js";import"./chunk-GAL4ENT6.js";var m=class r{constructor(e){this.http=e}_activeUser={id:1,name:"Ioni Bowcher",image:"ionibowcher.png",status:"active",messages:[{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit",ownerId:1,createdAt:1652646338240},{text:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",ownerId:1,createdAt:1652646368718},{text:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",ownerId:123,createdAt:1652646368718}],lastSeen:"2d"};activeUser=new q(this._activeUser);activeUser$=this.activeUser.asObservable();getChatData(){return this.http.get("/demo/data/chat.json").toPromise().then(e=>e.data).then(e=>e)}changeActiveChat(e){this._activeUser=e,this.activeUser.next(e)}sendMessage(e){this._activeUser.messages.push(e),this.activeUser.next(this._activeUser)}static \u0275fac=function(t){return new(t||r)(G(Y))};static \u0275prov=J({token:r,factory:r.\u0275fac})};var de=(r,e,t)=>({"bg-green-400":r,"bg-red-400":e,"bg-yellow-400":t}),W=class r{constructor(e){this.chatService=e}user;lastMessage;ngOnInit(){let e=this.user.messages.filter(t=>t.ownerId!==123);this.lastMessage=e[e.length-1]}changeView(e){this.chatService.changeActiveChat(e)}static \u0275fac=function(t){return new(t||r)(h(m))};static \u0275cmp=g({type:r,selectors:[["app-user-card"]],hostAttrs:[1,"flex-shrink-0"],inputs:{user:"user"},decls:12,vars:10,consts:[["tabindex","0",1,"flex","flex-nowrap","justify-between","items-center","border","border-surface-200","dark:border-surface-700","rounded","p-4","cursor-pointer","select-none","hover:bg-surface-100","dark:hover:bg-surface-800","transition-colors","duration-150",3,"keydown.enter","click"],[1,"flex","items-center"],[1,"relative","md:mr-4","flex-shrink-0"],["alt","user",1,"w-12","h-12","rounded-full","shadow-lg",3,"src"],[1,"w-4","h-4","rounded-full","border-2","border-surface-200","dark:border-surface-700","absolute",2,"bottom","2px","right","2px",3,"ngClass"],[1,"flex-col","hidden","md:flex"],[1,"text-surface-900","dark:text-surface-0","font-semibold","block"],[1,"block","text-surface-600","dark:text-surface-200","text-ellipsis","overflow-hidden","whitespace-nowrap","w-40","text-sm"],[1,"text-surface-700","dark:text-surface-100","font-semibold","ml-auto","hidden","md:inline"]],template:function(t,i){t&1&&(a(0,"div",0),u("keydown.enter",function(){return i.changeView(i.user)})("click",function(){return i.changeView(i.user)}),a(1,"div",1)(2,"div",2),l(3,"img",3)(4,"span",4),n(),a(5,"div",5)(6,"span",6),c(7),n(),a(8,"span",7),c(9),n()()(),a(10,"span",8),c(11),n()()),t&2&&(o(3),s("src",S("/demo/images/avatar/",i.user.image),y),o(),s("ngClass",T(6,de,i.user.status==="active",i.user.status==="busy",i.user.status==="away")),o(3),f(i.user.name),o(2),f(i.lastMessage.text),o(2),f(i.user.lastSeen))},dependencies:[w,U],encapsulation:2})};function ue(r,e){if(r&1&&l(0,"app-user-card",9),r&2){let t=e.$implicit;s("user",t)}}var L=class r{constructor(e){this.chatService=e}searchValue="";users=[];filteredUsers=[];ngOnInit(){this.chatService.getChatData().then(e=>{this.users=e,this.filteredUsers=this.users})}filter(){let e=[];for(let t=0;t<this.users.length;t++){let i=this.users[t];i.name.toLowerCase().indexOf(this.searchValue.toLowerCase())==0&&e.push(i)}this.filteredUsers=[...e]}static \u0275fac=function(t){return new(t||r)(h(m))};static \u0275cmp=g({type:r,selectors:[["app-chat-sidebar"]],decls:10,vars:2,consts:[[1,"flex","flex-col","items-center","border-b","border-surface-200","dark:border-surface-700","p-12"],["src","/demo/images/avatar/circle/avatar-f-1@2x.png","alt","Asiya Javayant",1,"w-24","h-24","rounded-full","shadow-lg"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-semibold","mt-6"],[1,"w-full","flex","gap-y-6","flex-col","border-surface-200","dark:border-surface-700","p-6"],[1,"w-full"],[1,"pi","pi-search"],["id","search","type","text","pInputText","","placeholder","Search",1,"w-full",3,"ngModelChange","input","ngModel"],[1,"flex","flex-row","gap-6","md:flex-col","overflow-auto"],[3,"user",4,"ngFor","ngForOf"],[3,"user"]],template:function(t,i){t&1&&(a(0,"div",0),l(1,"img",1),a(2,"span",2),c(3,"Asiya Javayant"),n()(),a(4,"div",3)(5,"p-iconfield",4),l(6,"p-inputicon",5),a(7,"input",6),E("ngModelChange",function(p){return M(i.searchValue,p)||(i.searchValue=p),p}),u("input",function(){return i.filter()}),n()(),a(8,"div",7),x(9,ue,1,1,"app-user-card",8),n()()),t&2&&(o(7),k("ngModel",i.searchValue),o(2),s("ngForOf",i.filteredUsers))},dependencies:[w,D,ie,te,ae,re,j,B,F,V,W,O,N],encapsulation:2})};var fe=(r,e,t)=>({"bg-green-400":r,"bg-red-400":e,"bg-yellow-400":t});function he(r,e){if(r&1&&(a(0,"div",23)(1,"div",24),l(2,"img",25),n(),a(3,"div",26)(4,"p",27),c(5),n(),a(6,"span",28),c(7),n(),a(8,"p",29),c(9),l(10,"i",30),n()()()),r&2){let t=v().$implicit,i=v();o(2),s("src",S("/demo/images/avatar/",i.user.image),y),o(3),$(" ",i.user.name," "),o(2),f(t.text),o(2),f(i.parseDate(t.createdAt))}}function ge(r,e){if(r&1&&(a(0,"div",23)(1,"div",31)(2,"span",32),c(3),n(),a(4,"p",29),c(5),l(6,"i",30),n()()()),r&2){let t=v().$implicit,i=v();o(3),f(t.text),o(2),$(" ",i.parseDate(t.createdAt)," ")}}function ve(r,e){if(r&1&&(a(0,"div"),x(1,he,11,5,"div",22)(2,ge,7,2,"div",22),n()),r&2){let t=e.$implicit,i=v();o(),s("ngIf",t.ownerId!==123),o(),s("ngIf",t.ownerId===i.defaultUserId)}}function xe(r,e){if(r&1){let t=H();a(0,"button",34),u("click",function(){let d=_(t).$implicit,p=v(2);return I(23).hide(),C(p.onEmojiSelect(d))}),n()}if(r&2){let t=e.$implicit;s("label",t)}}function be(r,e){if(r&1&&x(0,xe,1,1,"button",33),r&2){let t=v();s("ngForOf",t.emojis)}}var R=class r{constructor(e){this.chatService=e}defaultUserId=123;message;textContent="";uploadedFiles=[];emojis=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F602}","\u{1F923}","\u{1F607}","\u{1F609}","\u{1F60A}","\u{1F642}","\u{1F643}","\u{1F60B}","\u{1F60C}","\u{1F60D}","\u{1F970}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F92A}","\u{1F61C}","\u{1F61D}","\u{1F61B}","\u{1F911}","\u{1F60E}","\u{1F913}","\u{1F9D0}","\u{1F920}","\u{1F973}","\u{1F917}","\u{1F921}","\u{1F60F}","\u{1F636}","\u{1F610}","\u{1F611}","\u{1F612}","\u{1F644}","\u{1F928}","\u{1F914}","\u{1F92B}","\u{1F92D}","\u{1F925}","\u{1F633}","\u{1F61E}","\u{1F61F}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F614}","\u{1F61F}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F614}","\u{1F615}","\u{1F641}","\u{1F62C}","\u{1F97A}","\u{1F623}","\u{1F616}","\u{1F62B}","\u{1F629}","\u{1F971}","\u{1F624}","\u{1F62E}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F62F}","\u{1F626}","\u{1F627}","\u{1F622}","\u{1F625}","\u{1F62A}","\u{1F924}"];user;setMessage(){if(this.user){let e=this.user.messages.filter(t=>t.ownerId!==this.defaultUserId);this.message=e[e.length-1]}}ngOnInit(){this.setMessage()}sendMessage(){if(!(this.textContent==""||this.textContent===" ")){let e={text:this.textContent,ownerId:123,createdAt:new Date().getTime()};this.chatService.sendMessage(e),this.textContent=""}}onEmojiSelect(e){this.textContent+=e}parseDate(e){return new Date(e).toTimeString().split(":").slice(0,2).join(":")}static \u0275fac=function(t){return new(t||r)(h(m))};static \u0275cmp=g({type:r,selectors:[["app-chat-box"]],inputs:{user:"user"},decls:26,vars:11,consts:[["chatWindow",""],["op",""],["content",""],[1,"flex","flex-col","h-full"],[1,"flex","items-center","border-b","border-surface-200","dark:border-surface-700","p-4","lg:p-12"],[1,"relative","flex","items-center","mr-4"],["alt","user.name",1,"w-16","h-16","rounded-full","shadow-lg",3,"src"],[1,"w-4","h-4","rounded-full","border-2","border-surface-200","dark:border-surface-700","absolute","bottom-0","right-0",3,"ngClass"],[1,"mr-2"],[1,"text-surface-900","dark:text-surface-0","font-semibold","block"],[1,"text-surface-700","dark:text-surface-100"],[1,"flex","items-center","ml-auto"],["pButton","","icon","pi pi-phone","outlined","","severity","secondary","rounded","",1,"mr-4"],["pButton","","icon","pi pi-ellipsis-v","outlined","","severity","secondary","rounded",""],[1,"user-message-container","p-4","md:px-6","lg:px-12","lg:py-6","mt-2","overflow-y-auto",2,"max-height","53vh",3,"scrollTop"],[4,"ngFor","ngForOf"],[1,"p-4","md:p-6","lg:p-12","flex","flex-col","sm:flex-row","items-center","mt-auto","border-t","border-surface-200","dark:border-surface-700","gap-4"],["id","message","type","text","pInputText","","placeholder","Type a message",1,"flex-1","w-full","sm:w-auto","rounded",3,"ngModelChange","keydown.enter","ngModel"],[1,"flex","w-full","sm:w-auto","gap-4"],["pRipple","","severity","secondary",1,"w-full","sm:w-auto","justify-center","text-xl",3,"click"],["pButton","","pRipple","","label","Send","icon","pi pi-send",1,"w-full","sm:w-auto",3,"click"],["styleClass","w-full sm:w-30rem"],["class","grid gap-4 grid-nogutter mb-6",4,"ngIf"],[1,"grid","gap-4","grid-nogutter","mb-6"],[1,"mr-4","mt-1"],["alt","user.name",1,"w-12","h-12","rounded-full","shadow-lg",3,"src"],[1,"col","mt-4"],[1,"text-surface-900","dark:text-surface-0","font-semibold","mb-4"],[1,"text-surface-700","dark:text-surface-100","inline-block","font-medium","border","border-surface-200","dark:border-surface-700","p-4","whitespace-normal","rounded",2,"word-break","break-word","max-width","80%"],[1,"text-surface-700","dark:text-surface-100","mt-4"],[1,"pi","pi-check","ml-2","text-green-400"],[1,"col","mt-4","text-right"],[1,"inline-block","text-left","font-medium","border","border-surface-200","dark:border-surface-700","bg-primary-100","text-primary-900","p-4","whitespace-normal","rounded",2,"word-break","break-word","max-width","80%"],["pButton","","pRipple","","type","button","class","p-2 text-2xl","text","",3,"label","click",4,"ngFor","ngForOf"],["pButton","","pRipple","","type","button","text","",1,"p-2","text-2xl",3,"click","label"]],template:function(t,i){if(t&1){let d=H();a(0,"div",3)(1,"div",4)(2,"div",5),l(3,"img",6)(4,"span",7),n(),a(5,"div",8)(6,"span",9),c(7),n(),a(8,"span",10),c(9,"Last active 1 hour ago"),n()(),a(10,"div",11),l(11,"button",12)(12,"button",13),n()(),a(13,"div",14,0),x(15,ve,3,2,"div",15),n(),a(16,"div",16)(17,"input",17),E("ngModelChange",function(b){return _(d),M(i.textContent,b)||(i.textContent=b),C(b)}),u("keydown.enter",function(){return _(d),C(i.sendMessage())}),n(),a(18,"div",18)(19,"button",19),u("click",function(b){_(d);let ce=I(23);return C(ce.toggle(b))}),c(20,"\u{1F600}"),n(),a(21,"button",20),u("click",function(){return _(d),C(i.sendMessage())}),n()()()(),a(22,"p-popover",21,1),x(24,be,1,1,"ng-template",null,2,Q),n()}if(t&2){let d=I(14);o(3),s("src",S("/demo/images/avatar/",i.user.image),y),o(),s("ngClass",T(7,fe,i.user.status==="active",i.user.status==="busy",i.user.status==="away")),o(3),f(i.user.name),o(6),s("scrollTop",d.scrollHeight),o(2),s("ngForOf",i.user.messages),o(2),k("ngModel",i.textContent)}},dependencies:[j,B,F,V,w,U,D,X,oe,ne,O,N,ee,Z],encapsulation:2})};var le=class r{constructor(e){this.chatService=e;this.subscription=this.chatService.activeUser$.subscribe(t=>this.activeUser=t)}subscription;activeUser;ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||r)(h(m))};static \u0275cmp=g({type:r,selectors:[["app-chat"]],features:[K([m])],decls:5,vars:1,consts:[[1,"flex","flex-col","md:flex-row","gap-8",2,"min-height","81vh"],[1,"md:w-[25rem]","card","!p-0"],[1,"flex-1","card","!p-0"],[3,"user"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1),l(2,"app-chat-sidebar"),n(),a(3,"div",2),l(4,"app-chat-box",3),n()()),t&2&&(o(4),s("user",i.activeUser))},dependencies:[L,R],encapsulation:2})};export{le as Chat};
